<div style="margin-top: 20px">
    <h4>Processing and Analysis Details
        <a ng-click="$ctrl.showOutline = !$ctrl.showOutline">{{$ctrl.showOutline ? "Hide" : "View"}}</a>
    </h4>
    <p>
        View an outline of the processing and analysis for this data including workflow steps, instrument setup,
        samples, and the files involved for each step. The relationships in the workflow are
        presented in an outline format.
    </p>
    <div ng-if="$ctrl.showOutline">
        <ul style="list-style-type:none">
            <li ng-repeat="node in $ctrl.rootNode.children" layout="column">
                <div>
                    <a ng-if="node.children.length" ng-click="node.model.show = !node.model.show">
                        <i class="primary-color fa fa-fw"
                           ng-class="{'fa-folder': !node.model.show, 'fa-folder-open': node.model.show}"></i>
                        {{::node.model.name}}
                    </a>
                    <span ng-if="!node.children.length">
                        <i class="primary-color fa fa-fw fa-file"></i> {{::node.model.name}}
                    </span>
                    (<a ng-click="node.model.showDetails = !node.model.showDetails">Details</a>)
                </div>
                <mcpub-process-details process="node.model" ng-if="node.model.showDetails"></mcpub-process-details>
                <mcpub-dataset-details-outline-dir process="node"
                                                   ng-if="node.model.show">
                </mcpub-dataset-details-outline-dir>
            </li>
        </ul>
    </div>
</div>
