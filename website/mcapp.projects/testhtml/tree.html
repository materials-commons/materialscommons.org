<!DOCTYPE html>
<html ng-app="demo">
<head>
    <title></title>
    <link href="../app/assets/css/treeview.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.min.js"></script>
    <script src="assets/js/materialscommons/directives/tree.js"></script>
    <script type="text/javascript">
        var app = angular.module("demo", ['NgTree']);
        app.config(['$routeProvider', '$locationProvider', '$httpProvider', function ($routeProvider, $locationProvider, $httpProvider) {
            //$httpProvider.defaults.useXDomain = true;
            //$httpProvider.defaults.withCredentials = true;
            //delete $httpProvider.defaults.headers.common['X-Requested-With'];
        }]);
        function demoController($scope, $http) {
            $scope.searchText = "";
//            $scope.data = [
//                {"id": "1", "name": "Data_MatCommon",
//                    children: [
//                        {"id": "1.1", "name": "Location1", children:[{"id":"1.1.1", "name": "image1.png"}, {"id": "1.1.2", "name": "image2.png"}]},
//                        {"id": "1.2", "name": "Location2", children:[{"id":"1.2.1", "name": "imageloc1.png"}, {"id": "1.2.2", "name": "imageloc2.png"}]},
//                        {"id": "1.3", "name": "10-bf-50k.tif"},
//                        {"id": "1.4", "name": "11-bf-50k.tif"}
//                    ]
//                },
//                {"id": "2", "name": "AZ91_TEM_images",
//                    children:[
//                        {"id": "2.1", "name": "TEM_Images.docx"}
//                    ]
//                }
//            ];

            console.log("Here i am");
//            $http({
//                        method: 'PUT',
//                        url: "http://magnesium.eecs.umich.edu:5000/materialscommons/api/v1.0/abc"
//                        //headers:{Authorization:'Basic Z2xlbm46YWJj'},
//                        //withCredentials: true
//                    })
            $http.put("http://magnesium.eecs.umich.edu:5000/materialscommons/api/v1.0/abcuser/glenn?apikey=abc")
                    .success(function(data) {
                        console.log("Success");
                        console.dir(data);
                        $scope.abc = data;
                    })
                    .error(function(data, status) {
                        console.log("Fail");
                        console.dir(status);
                    })

//            $http.defaults.headers.common['Authorization'] = 'Basic Z2xlbm46YWJj';
            //$http({method: 'GET', url: 'http://localhost:5000/materialscommons/api/v1.0/private/private', headers:{'Authorization': 'Basic abc'}});
//            $http.jsonp("http://" + document.location.hostname + ":5000/materialscommons/api/v1.0/private/private?callback=JSON_CALLBACK",
//                    {headers:{'Authorizationxxx':'Basic Z2xlbm46YWJj'}})
//                    .success(function(data) {
//                        console.log("private access succeeded");
//                        console.dir(data);
//                    })
//                    .error(function(data, status, headers, config) {
//                        console.log("private access failed");
//                        console.dir(status);
//                        console.dir(headers);
//                        console.dir(config);
//                    });
//            $http.jsonp("http://" + document.location.hostname + ":5000/materialscommons/api/v1.0/user/mcfada@umich.edu/datagroups/tree?callback=JSON_CALLBACK")
//                    .success(function(data) {
//                        console.log("success");
//                        console.dir(data);
//                        $scope.data = data;
//                    })
//                    .error(function(data, status, headers, config) {
//                        console.log("error");
//                        console.dir(status);
//                        console.dir(headers);
//                        console.dir(config);
//                    });
//                        data.forEach(function(item) {
//                            var obj = {};
//                            obj.id = item.id;
//                            obj.name = item.name;
//                            obj.children = [];
//                            item.data.forEach(function(ditem) {
//                                var d = {};
//                                d.id = ditem.id;
//                                d.name = ditem.name;
//                                obj.children.push(d);
//                            });
//                            $scope.data.push(obj);
//                        })
//                    })
//                    .error(function(data, status) {
//                       console.log("error");
//                    });
//            $scope.productData = [{
//                "id": "6000", "Name": "All Categories",
//                children: [{
//                    "id": "6100", "Name": "Juice",
//                    children: [{
//                        "id": "6200", "Name": "Mom's Brands",
//                        children: [{ "id": "6454", "Name": "Mom's Apple Jug" },
//                                                                 { "id": "6456", "Name": "Mom's Apple Juice" },
//                                                                 { "id": "6458", "Name": "Mom's Grape Juice" },
//                                                                 { "id": "6462", "Name": "Mom's Apple Grape Jug" },
//                                                                 { "id": "6463", "Name": "Mom's Pear Blend" },
//                                                                 { "id": "6464", "Name": "Mom's Juice Cocktail Lite" }]
//                    },
//
//                                                           {
//                                                               "id": "6300", "Name": "Sparkle Brands",
//                                                               children: [{ "id": "6392", "Name": "Sparkle Pear Juice" },
//                                                                          { "id": "6393", "Name": "Sparkle Grape Juice Light" },
//                                                                          { "id": "6394", "Name": "Sparkle Apple Juice" }]
//                                                           },
//                                                           {
//                                                               "id": "6400", "Name": "Natural Choice",
//                                                               children: [{ "id": "6472", "Name": "Natural Choice Apple Juice" },
//                                                                          { "id": "6474", "Name": "Natural Choice Grape Juice" },
//                                                                          { "id": "6475", "Name": "Natural Choice Pear Juice" },
//                                                                          { "id": "6476", "Name": "Natural Choice Grape Juice Light" }]
//                                                           },
//                    ]
//                }]
//            }];

        };

    </script>
</head>
<body ng-controller="demoController">
    <h2>Data Tree View</h2>
    abc is {{ abc }}
    <input type="text" width="50px" ng-model="searchText" placeholder="Search data"/>
    <ngtree search-model="searchText" treeview-data="data" unique-id="id" display-attr="name"></ngtree>

</body>
</html>
